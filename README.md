# VK Notification Monitor

Простой сервис отслеживания упоминайний по ключевым словам в указанных сообществах в социальной сети ВКонтакте, с возможностью уведомления в Telegram

## Требования

Для пользования сервисом нужно получить API ключ Вконтакте, а так же иметь поднятую (или поднять новую) базу данных Postgres

## Установка

Возможны несколько вариантов установки.
Самый простой - склонировать текущий репозиторий и сделать

```
docker-compose up -d --build
```

Так же возможно поднять отдельные контейнеры для бэкэнда и фронтенда, для этого используйте Dockerfile внутри соответствующих папок. Баш скрипты для поднятия нужных таблиц в вашей БД находятся в `./backend/database`

## Переменные окружения

Можно передавать либо через файл .env, либо через docker-compose

| Имя                    | Описание                                                             |
| ---------------------- | -------------------------------------------------------------------- |
| `SERVER_ADDRESS`       | Адрес на котором будет запущен сервис                                |
| `DB_HOST`              | Адрес БД                                                             |
| `DB_USER`              | Пользователь БД                                                      |
| `DB_PASSWORD`          | Пароль пользователя БД                                               |
| `DB_NAME`              | Имя БД                                                               |
| `VK_TOKEN`             | Токен API VK                                                         |
| `VK_VERSION`           | Версия API VK (по умолчанию https://api.vk.com)                      |
| `VK_API_URL`           | Адрес api эндпоинта VK (по умолчанию https://api.vk.com)             |
| `ENABLE_NOTIFICATIONS` | Включить уведомления в телеграме (по умолчанию 0, 1 - включить)      |
| `TELEGRAM_BOT_TOKEN`   | Токен бота в телеграме (по умолчанию пусто)                          |
| `SYNC_INTERVAL`        | Периодичность мониторинга новых постов (в секундах, по умолчанию 30) |

## Добавление пользователя группы/пользователя для рассылки в телеграм

На данный момент возможно только ручным инсертом в таблицу notification, где type=telegram, value= chat id с пользователем или группой

## TODO

1. Поиск не только по словам, но и по комментариям
2. Автоматическое добавление уведомления после команды боту
3. Нормальная страница настроек
